console.log("Content script loaded"),window.addEventListener("message",(function(e){e.source==window&&e.data.type&&(e.data.type.startsWith("FROM_PAGE_")||"createPSBT"===e.data.action)&&(console.log("Sending message to extension:",e.data),chrome.runtime.sendMessage(e.data).then((e=>{console.log("Received response from extension:",e),window.postMessage({type:"FROM_EXTENSION",...e},"*")})).catch((e=>{console.error("Error in chrome.runtime.sendMessage:",e),window.postMessage({type:"FROM_EXTENSION",action:"ERROR",message:e.message||"An error occurred"},"*")})))})),chrome.runtime.onMessage.addListener(((e,n,t)=>{if("showConfirmation"===e.action)return console.log("Received showConfirmation request:",e),(o=e.request,new Promise((e=>{const n=document.createElement("div");n.style.cssText="\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background-color: rgba(0, 0, 0, 0.5);\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                z-index: 10000;\n            ";const t=document.createElement("div");t.style.cssText="\n                background-color: white;\n                padding: 20px;\n                border-radius: 5px;\n                max-width: 400px;\n            ";const s=document.createElement("p");s.textContent="signMessage"===o.type?"Do you want to sign this message?":"Do you want to sign this PSBT?";const i=document.createElement("pre");i.style.cssText="\n                word-wrap: break-word;\n                white-space: pre-wrap;\n                max-height: 100px;\n                overflow-y: auto;\n            ",i.textContent="signMessage"===o.type?o.message:o.psbtHex;const a=document.createElement("button");a.textContent="Confirm",a.style.marginRight="10px";const r=document.createElement("button");r.textContent="Cancel",t.appendChild(s),t.appendChild(i),t.appendChild(a),t.appendChild(r),n.appendChild(t),a.onclick=()=>{document.body.removeChild(n),console.log("User confirmed"),e({confirmed:!0})},r.onclick=()=>{document.body.removeChild(n),console.log("User cancelled"),e({confirmed:!1})},document.body.appendChild(n)}))).then((e=>{console.log("Confirmation result:",e),t(e)})),!0;var o})),window.postMessage({type:"CONTENT_SCRIPT_LOADED"},"*");
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudFNjcmlwdC5qcyIsIm1hcHBpbmdzIjoiQUFDQUEsUUFBUUMsSUFBSSx5QkFxRVpDLE9BQU9DLGlCQUFpQixXQUFXLFNBQVVDLEdBQ2pDQSxFQUFNQyxRQUFVSCxRQUVoQkUsRUFBTUUsS0FBS0MsT0FBU0gsRUFBTUUsS0FBS0MsS0FBS0MsV0FBVyxlQUF1QyxlQUF0QkosRUFBTUUsS0FBS0csVUFDdkVULFFBQVFDLElBQUksZ0NBQWlDRyxFQUFNRSxNQUNuREksT0FBT0MsUUFBUUMsWUFBWVIsRUFBTUUsTUFDeEJPLE1BQUtDLElBQ0VkLFFBQVFDLElBQUksb0NBQXFDYSxHQUNqRFosT0FBT2EsWUFBWSxDQUFFUixLQUFNLG9CQUFxQk8sR0FBWSxJQUFJLElBRXZFRSxPQUFNQyxJQUNDakIsUUFBUWlCLE1BQU0sdUNBQXdDQSxHQUN0RGYsT0FBT2EsWUFBWSxDQUNYUixLQUFNLGlCQUNORSxPQUFRLFFBQ1JTLFFBQVNELEVBQU1DLFNBQVcscUJBQy9CLElBQUksSUFHdkMsSUFFQVIsT0FBT0MsUUFBUVEsVUFBVUMsYUFBWSxDQUFDRixFQUFTRyxFQUFRQyxLQUMvQyxHQUF1QixxQkFBbkJKLEVBQVFULE9BTUosT0FMQVQsUUFBUUMsSUFBSSxxQ0FBc0NpQixJQTFGbkNLLEVBMkZPTCxFQUFRSyxRQTFGL0IsSUFBSUMsU0FBU0MsSUFDWixNQUFNQyxFQUFRQyxTQUFTQyxjQUFjLE9BQ3JDRixFQUFNRyxNQUFNQyxRQUFVLDJXQWF0QixNQUFNQyxFQUFlSixTQUFTQyxjQUFjLE9BQzVDRyxFQUFhRixNQUFNQyxRQUFVLG1LQU83QixNQUFNWixFQUFVUyxTQUFTQyxjQUFjLEtBQ3ZDVixFQUFRYyxZQUErQixnQkFBakJULEVBQVFoQixLQUNwQixvQ0FDQSxpQ0FFVixNQUFNMEIsRUFBVU4sU0FBU0MsY0FBYyxPQUN2Q0ssRUFBUUosTUFBTUMsUUFBVSx3S0FNeEJHLEVBQVFELFlBQStCLGdCQUFqQlQsRUFBUWhCLEtBQXlCZ0IsRUFBUUwsUUFBVUssRUFBUVcsUUFFakYsTUFBTUMsRUFBZ0JSLFNBQVNDLGNBQWMsVUFDN0NPLEVBQWNILFlBQWMsVUFDNUJHLEVBQWNOLE1BQU1PLFlBQWMsT0FFbEMsTUFBTUMsRUFBZVYsU0FBU0MsY0FBYyxVQUM1Q1MsRUFBYUwsWUFBYyxTQUUzQkQsRUFBYU8sWUFBWXBCLEdBQ3pCYSxFQUFhTyxZQUFZTCxHQUN6QkYsRUFBYU8sWUFBWUgsR0FDekJKLEVBQWFPLFlBQVlELEdBQ3pCWCxFQUFNWSxZQUFZUCxHQUVsQkksRUFBY0ksUUFBVSxLQUNoQlosU0FBU2EsS0FBS0MsWUFBWWYsR0FDMUIxQixRQUFRQyxJQUFJLGtCQUNad0IsRUFBUSxDQUFFaUIsV0FBVyxHQUFPLEVBR3BDTCxFQUFhRSxRQUFVLEtBQ2ZaLFNBQVNhLEtBQUtDLFlBQVlmLEdBQzFCMUIsUUFBUUMsSUFBSSxrQkFDWndCLEVBQVEsQ0FBRWlCLFdBQVcsR0FBUSxFQUdyQ2YsU0FBU2EsS0FBS0YsWUFBWVosRUFBTSxLQTRCT2IsTUFBSzhCLElBQ3BDM0MsUUFBUUMsSUFBSSx1QkFBd0IwQyxHQUNwQ3JCLEVBQWFxQixFQUFPLEtBRXJCLEVBL0Z2QixJQUErQnBCLENBZ0d2QixJQUdSckIsT0FBT2EsWUFBWSxDQUFFUixLQUFNLHlCQUEyQiIsInNvdXJjZXMiOlsid2VicGFjazovL2hkd2FsbGV0Ly4vc3JjL2NvbnRlbnRTY3JpcHQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2NvbnRlbnRTY3JpcHQuanNcbmNvbnNvbGUubG9nKCdDb250ZW50IHNjcmlwdCBsb2FkZWQnKTtcblxuZnVuY3Rpb24gc2hvd0NvbmZpcm1hdGlvbk1vZGFsKHJlcXVlc3QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBtb2RhbC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjUpO1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAxMDAwMDtcbiAgICAgICAgICAgIGA7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBtb2RhbENvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBtb2RhbENvbnRlbnQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDQwMHB4O1xuICAgICAgICAgICAgYDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS50ZXh0Q29udGVudCA9IHJlcXVlc3QudHlwZSA9PT0gJ3NpZ25NZXNzYWdlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyAnRG8geW91IHdhbnQgdG8gc2lnbiB0aGlzIG1lc3NhZ2U/J1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAnRG8geW91IHdhbnQgdG8gc2lnbiB0aGlzIFBTQlQ/JztcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwcmUnKTtcbiAgICAgICAgICAgICAgICBkZXRhaWxzLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMDBweDtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICBkZXRhaWxzLnRleHRDb250ZW50ID0gcmVxdWVzdC50eXBlID09PSAnc2lnbk1lc3NhZ2UnID8gcmVxdWVzdC5tZXNzYWdlIDogcmVxdWVzdC5wc2J0SGV4O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b24udGV4dENvbnRlbnQgPSAnQ29uZmlybSc7XG4gICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbi5zdHlsZS5tYXJnaW5SaWdodCA9ICcxMHB4JztcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvbi50ZXh0Q29udGVudCA9ICdDYW5jZWwnO1xuXG4gICAgICAgICAgICAgICAgbW9kYWxDb250ZW50LmFwcGVuZENoaWxkKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIG1vZGFsQ29udGVudC5hcHBlbmRDaGlsZChkZXRhaWxzKTtcbiAgICAgICAgICAgICAgICBtb2RhbENvbnRlbnQuYXBwZW5kQ2hpbGQoY29uZmlybUJ1dHRvbik7XG4gICAgICAgICAgICAgICAgbW9kYWxDb250ZW50LmFwcGVuZENoaWxkKGNhbmNlbEJ1dHRvbik7XG4gICAgICAgICAgICAgICAgbW9kYWwuYXBwZW5kQ2hpbGQobW9kYWxDb250ZW50KTtcblxuICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgY29uZmlybWVkJyk7ICAvLyBEZWJ1ZyBsb2dcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeyBjb25maXJtZWQ6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVXNlciBjYW5jZWxsZWQnKTsgIC8vIERlYnVnIGxvZ1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7IGNvbmZpcm1lZDogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICAgICAgICB9KTtcbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSAhPSB3aW5kb3cpIHJldHVybjtcblxuICAgICAgICBpZiAoZXZlbnQuZGF0YS50eXBlICYmIChldmVudC5kYXRhLnR5cGUuc3RhcnRzV2l0aCgnRlJPTV9QQUdFXycpIHx8IGV2ZW50LmRhdGEuYWN0aW9uID09PSAnY3JlYXRlUFNCVCcpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlbmRpbmcgbWVzc2FnZSB0byBleHRlbnNpb246JywgZXZlbnQuZGF0YSk7ICAvLyBEZWJ1ZyBsb2dcbiAgICAgICAgICAgICAgICBjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZShldmVudC5kYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgcmVzcG9uc2UgZnJvbSBleHRlbnNpb246JywgcmVzcG9uc2UpOyAgLy8gRGVidWcgbG9nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7IHR5cGU6ICdGUk9NX0VYVEVOU0lPTicsIC4uLnJlc3BvbnNlIH0sICcqJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdGUk9NX0VYVEVOU0lPTicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnRVJST1InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ0FuIGVycm9yIG9jY3VycmVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAnKicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbn0pO1xuXG5jaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoKG1lc3NhZ2UsIHNlbmRlciwgc2VuZFJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGlmIChtZXNzYWdlLmFjdGlvbiA9PT0gXCJzaG93Q29uZmlybWF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgc2hvd0NvbmZpcm1hdGlvbiByZXF1ZXN0OicsIG1lc3NhZ2UpOyAgLy8gRGVidWcgbG9nXG4gICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1hdGlvbk1vZGFsKG1lc3NhZ2UucmVxdWVzdCkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbmZpcm1hdGlvbiByZXN1bHQ6JywgcmVzdWx0KTsgIC8vIERlYnVnIGxvZ1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEluZGljYXRlcyB0aGF0IHdlIHdpbGwgc2VuZCBhIHJlc3BvbnNlIGFzeW5jaHJvbm91c2x5XG4gICAgICAgIH1cbn0pO1xuXG53aW5kb3cucG9zdE1lc3NhZ2UoeyB0eXBlOiAnQ09OVEVOVF9TQ1JJUFRfTE9BREVEJyB9LCAnKicpOyJdLCJuYW1lcyI6WyJjb25zb2xlIiwibG9nIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwic291cmNlIiwiZGF0YSIsInR5cGUiLCJzdGFydHNXaXRoIiwiYWN0aW9uIiwiY2hyb21lIiwicnVudGltZSIsInNlbmRNZXNzYWdlIiwidGhlbiIsInJlc3BvbnNlIiwicG9zdE1lc3NhZ2UiLCJjYXRjaCIsImVycm9yIiwibWVzc2FnZSIsIm9uTWVzc2FnZSIsImFkZExpc3RlbmVyIiwic2VuZGVyIiwic2VuZFJlc3BvbnNlIiwicmVxdWVzdCIsIlByb21pc2UiLCJyZXNvbHZlIiwibW9kYWwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsImNzc1RleHQiLCJtb2RhbENvbnRlbnQiLCJ0ZXh0Q29udGVudCIsImRldGFpbHMiLCJwc2J0SGV4IiwiY29uZmlybUJ1dHRvbiIsIm1hcmdpblJpZ2h0IiwiY2FuY2VsQnV0dG9uIiwiYXBwZW5kQ2hpbGQiLCJvbmNsaWNrIiwiYm9keSIsInJlbW92ZUNoaWxkIiwiY29uZmlybWVkIiwicmVzdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==